/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var y=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var V=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var I=(n,s)=>{for(var i in s)y(n,i,{get:s[i],enumerable:!0})},M=(n,s,i,e)=>{if(s&&typeof s=="object"||typeof s=="function")for(let t of V(s))!D.call(n,t)&&t!==i&&y(n,t,{get:()=>s[t],enumerable:!(e=N(s,t))||e.enumerable});return n};var j=n=>M(y({},"__esModule",{value:!0}),n);var F={};I(F,{default:()=>g});module.exports=j(F);var u=require("obsidian");var C=require("@codemirror/language"),P=require("@codemirror/state"),d=require("@codemirror/view");function k(n){let s=(n.match(/(a{1,2}|A{1,2}|i|I|①|1)/)||"")[0];if(s){let[i,e]=n.split(RegExp(`${s}(.*)`)),t=`{ system: extends decimal; prefix: "${i}"; suffix: "${e}"; }`;switch(s){case"\u2460":t=`{ system: fixed; prefix: "${i}"; suffix: "${e}"; symbols: "\u2460" "\u2461" "\u2462" "\u2463" "\u2464" "\u2465" "\u2466" "\u2467" "\u2468" "\u2469" "\u246A" "\u246B" "\u246C" "\u246D" "\u246E" "\u246F" "\u2470" "\u2471" "\u2472" "\u2473" "\u3251" "\u3252" "\u3253" "\u3254" "\u3255" "\u3256" "\u3257" "\u3258" "\u3259" "\u325A" "\u325B" "\u325C" "\u325D" "\u325E" "\u325F" "\u32B1" "\u32B2" "\u32B3" "\u32B4" "\u32B5" "\u32B6" "\u32B7" "\u32B8" "\u32B9" "\u32BA" "\u32BB" "\u32BC" "\u32BD" "\u32BE" "\u32BF"; }`;break;case"I":t=`{ system: extends upper-roman; prefix: "${i}"; suffix: "${e}"; }`;break;case"i":t=`{ system: extends lower-roman; prefix: "${i}"; suffix: "${e}"; }`;break;case"A":t=`{ system: extends upper-alpha; prefix: "${i}"; suffix: "${e}"; }`;break;case"a":t=`{ system: extends lower-alpha; prefix: "${i}"; suffix: "${e}"; }`;break;case"AA":t=`{ system: alphabetic; prefix: "${i}"; suffix: "${e}"; symbols: "AA" "BB" "CC" "DD" "EE" "FF" "GG" "HH" "II" "JJ" "KK" "LL" "MM" "NN" "OO" "PP" "QQ" "RR" "SS" "TT" "UU" "VV" "WW" "XX" "YY" "ZZ"; }`;break;case"aa":t=`{ system: alphabetic; prefix: "${i}"; suffix: "${e}"; symbols: "aa" "bb" "cc" "dd" "ee" "ff" "gg" "hh" "ii" "jj" "kk" "ll" "mm" "nn" "oo" "pp" "qq" "rr" "ss" "tt" "uu" "vv" "ww" "xx" "yy" "zz"; }`}return t}else return`{ system: cyclic; symbols: "${n}"; suffix: ""; }`}function h(n){return n<1?"":h(Math.floor((n-1)/26))+String.fromCharCode((n-1)%26+65)}var H=[["M",1e3],["CM",900],["D",500],["CD",400],["C",100],["XC",90],["L",50],["XL",40],["X",10],["IX",9],["V",5],["IV",4],["I",1]];function v(n){let s="";for(let[i,e]of H)s+=i.repeat(Math.floor(n/e)),n%=e;return s}var O=["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473","\u3251","\u3252","\u3253","\u3254","\u3255","\u3256","\u3257","\u3258","\u3259","\u325A","\u325B","\u325C","\u325D","\u325E","\u325F","\u32B1","\u32B2","\u32B3","\u32B4","\u32B5","\u32B6","\u32B7","\u32B8","\u32B9","\u32BA","\u32BB","\u32BC","\u32BD","\u32BE","\u32BF"];function A(n,s){let i=(n.match(/(a{1,2}|A{1,2}|i|I|①|1)/)||"")[0];if(i){let[e,t]=n.split(RegExp(`${i}(.*)`)),l=""+s;switch(i){case"A":l=h(s);break;case"a":l=h(s).toLowerCase();break;case"I":l=v(s);break;case"i":l=v(s).toLowerCase();break;case"AA":l=h(s).repeat(2);break;case"aa":l=h(s).toLowerCase().repeat(2);break;case"\u2460":l=O[s-1]||""+s;break}return e+l+t}else return n}var w=class extends d.WidgetType{constructor(i,e){super();this.enumerator=i;this.pattern=e}toDOM(i){let e=document.createElement("span");return e.classList.add("lawlist-olchar"),e.innerText=A(this.pattern||"1. ",this.enumerator),e}},x=class extends d.WidgetType{constructor(i){super();this.listchar=i}toDOM(i){let e=document.createElement("span");return e.classList.add("lawlist-ulchar"),e.innerText=this.listchar||"\u2022 ",e}},f=class{constructor(s,i){this.obsPlugin=i;this.decorations=this.buildDecorations(s)}update(s){this.decorations=this.buildDecorations(s.view)}destroy(){}buildDecorations(s){let i=new P.RangeSetBuilder,e=r=>s.state.doc.sliceString(r.from,r.to),t=this.obsPlugin.ol_patterns,l=this.obsPlugin.ul_patterns;for(let{from:r,to:p}of s.visibleRanges)(0,C.syntaxTree)(s.state).iterate({from:r,to:p,enter(a){var L;let S=a.type.name.startsWith("formatting_formatting-list_formatting-list-ol_list-"),_=a.type.name.startsWith("formatting_formatting-list_formatting-list-ul_list-");if(S||_){let T=Number.parseInt(s.state.doc.sliceString(a.from,a.to-2)),m=Number.parseInt(((((L=a.node.parent)==null?void 0:L.type.name)||"").match(/\d+$/)||[""])[0])-1;if(Number.isNaN(m))throw new Error("Node indentation level not found.");let $=a.node.nextSibling,o=(($?e($):"").match(/^\{(.*)\}/)||["",""])[1];if(s.state.selection.ranges.filter(E=>E.from<a.to+o.length+(o?2:0)&&E.to>a.from-1).length)return;_&&(o||l[m])?i.add(a.from,a.to+(o?o.length+2:0),d.Decoration.replace({widget:new x(o||l[m])})):S&&(o||t[m])&&i.add(a.from,a.to+(o?o.length+2:0),d.Decoration.replace({widget:new w(T,o||t[m])}))}}});return i.finish()}};var R=require("@codemirror/view");var c=30,X={ol_input:[],ul_input:[],loop:!0},g=class extends u.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new b(this.app,this));let i={decorations:e=>e.decorations};this.registerEditorExtension(R.ViewPlugin.define(e=>new f(e,this),i)),this.patternStylesheet=document.head.appendChild(document.createElement("style")),this.updatePatternStylesheet(!1)}onunload(){document.head.removeChild(this.patternStylesheet)}updatePatternStylesheet(i){let e=this.patternStylesheet.sheet;if(i)for(;e!=null&&e.cssRules.length;)e.deleteRule(0);for(let t=0;t<c;t++)if(this.ol_patterns[t]){let l=k(this.ol_patterns[t]);e==null||e.insertRule(`@counter-style lawlist_${t} ${l}`),e==null||e.insertRule(`.markdown-rendered ${Array(t).fill("li").join(" ")} ol { list-style: lawlist_${t}; }`)}else e==null||e.insertRule(`.markdown-rendered ${Array(t).fill("li").join(" ")} ol { list-style: decimal; }`);e==null||e.insertRule(`.markdown-rendered ${Array(c).fill("li").join(" ")} ol { list-style: decimal; }`);for(let t=0;t<c;t++)this.ul_patterns[t]?(e==null||e.insertRule(`.markdown-rendered ${Array(t).fill("li").join(" ")} ul.has-list-bullet > li::marker { color: var(--list-marker-color); content: "${this.ul_patterns[t]}"; }`),e==null||e.insertRule(`.markdown-rendered ${Array(t).fill("li").join(" ")} ul > li > .list-bullet::after { visibility: hidden; }`)):(e==null||e.insertRule(`.markdown-rendered ${Array(t).fill("li").join(" ")} ul.has-list-bullet > li::marker { content: ""; }`),e==null||e.insertRule(`.markdown-rendered ${Array(t).fill("li").join(" ")} ul > li > .list-bullet::after { visibility: visible; }`));e==null||e.insertRule(`.markdown-rendered ${Array(c).fill("li").join(" ")} ul.has-list-bullet > li::marker { content: ""; }`),e==null||e.insertRule(`.markdown-rendered ${Array(c).fill("li").join(" ")} ul > li > .list-bullet::after { visibility: visible; }`)}async loadSettings(){this.settings=Object.assign({},X,await this.loadData()),this.computePatterns()}computePatterns(){let i=l=>!!(l&&l.trim().length>0),e=this.settings.ol_input.slice(0,this.settings.ol_input.findLastIndex(i)+1);if(this.ol_patterns=e.slice(),this.settings.loop)for(;this.ol_patterns.length<c;)this.ol_patterns.push(e[this.ol_patterns.length%e.length]);let t=this.settings.ul_input.slice(0,this.settings.ul_input.findLastIndex(i)+1);if(this.ul_patterns=t.slice(),this.settings.loop)for(;this.ul_patterns.length<c;)this.ul_patterns.push(t[this.ul_patterns.length%t.length])}async saveSettings(){await this.saveData(this.settings),this.computePatterns(),this.updatePatternStylesheet(!0)}},b=class extends u.PluginSettingTab{constructor(i,e){super(i,e);this.plugin=e}display(){let{containerEl:i}=this;i.empty();let e=i.createEl("p");e.classList.add("lawlist-settings-desc"),e.appendText("Need help? Check the "),e.appendChild(createEl("a",{text:"README",href:"https://github.com/willem-schlieter/lawlist"})),e.appendText("!"),e.appendChild(createEl("br")),e.appendChild(createEl("br")),new u.Setting(i).setName("Ordered List Styles").setHeading();let t=i.createEl("p");t.classList.add("lawlist-settings-desc"),t.appendText("For each indentation level in ordered lists, type in the first enumerator. Supported numbering systems are:"),t.appendChild(createEl("code",{text:" 1, I, i, \u2460, A, AA, a, aa"})),t.appendText(". Enumerators can also include other characters as prefix/suffix, e.g. "),t.appendChild(createEl("code",{text:"(a) "})),t.appendText(" or "),t.appendChild(createEl("code",{text:"I. "})),t.appendText(".");for(let r=0;r<10;r++)new u.Setting(i).setName(`Level ${r}`).addText(p=>p.setPlaceholder("1. ").setValue(this.plugin.settings.ol_input[r]||"").onChange(async a=>{this.plugin.settings.ol_input[r]=a||"",await this.plugin.saveSettings()}));new u.Setting(i).setName("Unordered List Styles").setHeading();let l=i.createEl("p");l.classList.add("lawlist-settings-desc"),l.appendText("For each indentation level in unordered lists, type in any character/sequence as bullet.");for(let r=0;r<10;r++)new u.Setting(i).setName(`Level ${r}`).addText(p=>p.setPlaceholder("\u2022 ").setValue(this.plugin.settings.ul_input[r]||"").onChange(async a=>{this.plugin.settings.ul_input[r]=a||"",await this.plugin.saveSettings()}));new u.Setting(i).setName("Loop styles").setHeading().setDesc(`If enabled, your sequence of styles will be looped for higher levels, but only for ${c} levels. Otherwise, unset levels will default to decimal.`).addToggle(r=>r.setValue(this.plugin.settings.loop).onChange(async p=>{this.plugin.settings.loop=p,await this.plugin.saveSettings()}))}};

/* nosourcemap */